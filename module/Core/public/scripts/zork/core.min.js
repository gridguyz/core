(function(global){if(!
/*@cc_on!@*/
0){return}var e=["abbr","article","aside","audio","bb","bdi","canvas","datagrid","datalist","details","figure","figcaption","footer","header","hgroup","keygen","mark","menu","meter","nav","output","progress","section","source","time","track","video"],i=e.length;while(i--){global.document.createElement(e[i])}}(window));(function(a,E){if(typeof a.zork!=="undefined"){return}a.Zork=function(){this.version="1.0";this.modulePrefix=["zork"]};var j=a.js=a.zork=new a.Zork();var Z=function(ae,ad){ae=ae.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(new RegExp(String.fromCharCode(0),"g"),"\\x00").replace(/\n/g,"\\n");if(!!ad){ae=ae.replace(/'/g,"\\'")}return ae};var O=false;if(typeof Object.defineProperty==="function"){if(typeof Object.isExtensible==="function"){a.Zork.prototype.property=function C(af,ag,ae,ad){ad=!!ad;if(Object.isExtensible(af)){Object.defineProperty(af,ag,{value:ae,writeable:ad,configurable:false,enumerable:false})}else{af[ag]=ae}}}else{a.Zork.prototype.property=function d(ag,ah,ae,ad){ad=!!ad;try{Object.defineProperty(ag,ah,{value:ae,writeable:ad,configurable:false,enumerable:false})}catch(af){ag[ah]=ae}}}}else{if(typeof Object.prototype.__defineGetter__==="function"){a.Zork.prototype.property=function P(ag,ah,af,ad){var ae=af;ad=!!ad;Object.prototype.__defineGetter__.call(ag,ah,function(){return ae});if(ad){Object.prototype.__defineSetter__.call(ag,ah,function(ai){return ae=ai})}else{Object.prototype.__defineSetter__.call(ag,ah,function(ai){if(ae===ai){return ae}else{throw new TypeError("Cannot change this property")}})}}}else{a.Zork.prototype.property=function G(ae,af,ad){ae[af]=ad}}}if(!Boolean.isBoolean){j.property(Boolean,"isBoolean",function q(ad){return typeof ad==="boolean"||ad instanceof Boolean||Object.prototype.toString.call(ad)==="[object Boolean]"})}if(!Array.isArray){j.property(Array,"isArray",function X(ad){return ad instanceof Array||Object.prototype.toString.call(ad)==="[object Array]"})}if(!Date.isDate){j.property(Date,"isDate",function s(ad){return ad instanceof Date||Object.prototype.toString.call(ad)==="[object Date]"})}if(!Date.now){j.property(Date,"now",function x(){return Number(new Date())})}if(!Function.isFunction){j.property(Function,"isFunction",function U(ad){return typeof ad==="function"||ad instanceof Function||Object.prototype.toString.call(ad)==="[object Function]"})}if(!Number.isNumber){j.property(Number,"isNumber",function N(ad){return typeof ad==="number"||ad instanceof Number||Object.prototype.toString.call(ad)==="[object Number]"})}if(!Object.isObject){j.property(Object,"isObject",function f(ad){return(ad!==null)&&(typeof ad!=="undefined")&&(!Array.isArray(ad))&&(!Boolean.isBoolean(ad))&&(!Date.isDate(ad))&&(!Number.isNumber(ad))&&(!RegExp.isRegExp(ad))&&(!String.isString(ad))&&(!Function.isFunction(ad))&&(typeof ad==="object"||Object.prototype.toString.call(ad)==="[object Object]")})}if(!Object.isUndefined){j.property(Object,"isUndefined",function u(ae,ad){if(ae===null||ae===undefined||typeof ae==="undefined"||(typeof ae==="number"&&isNaN(ae))){return true}if(typeof ad!=="undefined"&&(ae[ad]===null||ae[ad]===undefined||typeof ae[ad]==="undefined"||(typeof ae[ad]==="number"&&isNaN(ae[ad])))){return true}return false})}if(!Object.notUndefined){j.property(Object,"notUndefined",function k(){var ae,ad=arguments.length;for(ae=0;ae<ad;++ae){if(!Object.isUndefined(arguments[ae])){return arguments[ae]}}return undefined})}if(!Object.isEmpty){j.property(Object,"isEmpty",function t(ae){var ad=/^\s*function\s*[^\(]*\(\s*[^\)]*\)\s*\{\s*("use strict";)?\s*\}\s*$/m;return Object.isUndefined(ae)||(typeof ae==="object"&&E.isEmptyObject(ae))||(Array.isArray(ae)&&ae.length===0)||(Date.isDate(ae)&&Number(ae)===0)||(Function.isFunction(ae)&&ad.test(String(ae)))||(Number.isNumber(ae)&&isNaN(ae))||(RegExp.isRegExp(ae)&&ae.source==="")||(String.isString(ae)&&ae==="")})}if(!Object.isNode){j.property(Object,"isNode",function p(ad){return(typeof a.Node==="object"?ad instanceof a.Node:typeof ad==="object"&&typeof ad.nodeType==="number"&&typeof ad.nodeName==="string")})}if(!Object.isElement){j.property(Object,"isElement",function H(ad){return(typeof a.HTMLElement==="object"?ad instanceof a.HTMLElement:typeof ad==="object"&&ad.nodeType===1&&typeof ad.nodeName==="string")})}if(!Object.getType){j.property(Object,"getType",function y(ad){if(typeof ad==="undefined"||ad===undefined){return"undefined"}if(ad===null){return"null"}if(Array.isArray(ad)){return"array"}if(Date.isDate(ad)){return"date"}if(Number.isNumber(ad)){return isNaN(ad)?"nan":"number"}if(RegExp.isRegExp(ad)){return"regexp"}if(Function.isFunction(ad)){return"function"}if(String.isString(ad)){return"string"}return"object"})}if(!RegExp.isRegExp){j.property(RegExp,"isRegExp",function S(ad){return ad instanceof RegExp||Object.prototype.toString.call(ad)==="[object RegExp]"})}if(!RegExp.escape){j.property(RegExp,"escape",function V(ad){return String(ad).replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")})}if(!String.isString){j.property(String,"isString",function Y(ad){return typeof ad==="string"||ad instanceof String||Object.prototype.toString.call(ad)==="[object String]"})}if(!Array.prototype.filter){j.property(Array.prototype,"filter",function F(ai,ae){if(!Function.isFunction(ai)){throw new TypeError()}var ag=[],af,ad=this.length;ae=ae||this;for(af=0;af<ad;++af){var ah=this[af];if(ai.call(ag,ah,af,this)){ag.push(ah)}}return ag})}if(!Array.prototype.forEach){j.property(Array.prototype,"forEach",function v(ag,ae){if(!Function.isFunction(ag)){throw new TypeError()}ae=ae||this;var af,ad=this.length;for(af=0;af<ad;++af){ag.call(ae,this[af],af,this)}})}if(!Array.prototype.every){j.property(Array.prototype,"every",function I(ag,ae){if(!Function.isFunction(ag)){throw new TypeError()}ae=ae||this;var af,ad=this.length;for(af=0;af<ad;++af){if(!ag.call(ae,this[af],af,this)){return false}}return true})}if(!Array.prototype.map){j.property(Array.prototype,"map",function e(ah,af){if(!Function.isFunction(ah)){throw new TypeError()}var ad=[],ag,ae=this.length;af=af||this;for(ag=0;ag<ae;++ag){ad[ag]=ah.call(af,this[ag],ag,this)}return ad})}if(!Array.prototype.some){j.property(Array.prototype,"some",function c(ag,ae){if(!Function.isFunction(ag)){throw new TypeError()}ae=ae||this;var af,ad=this.length;for(af=0;af<ad;++af){if(ag.call(ae,this[af],af,this)){return true}}return false})}if(!Array.prototype.reduce){j.property(Array.prototype,"reduce",function l(ai,ae){if(!Function.isFunction(ai)){throw new TypeError()}var ag=null,ah=null,af=0,ad=this.length;if(Object.isUndefined(ae)){ag=this[af++]}else{ag=ae}ah=ag;for(;af<ad;++af){ah=ai(ah,this[af],af,this)}return ah})}if(!Array.prototype.reduceRight){j.property(Array.prototype,"reduceRight",function L(ah,ad){if(!Function.isFunction(ah)){throw new TypeError()}var af=null,ag=null,ae=this.length-1;if(Object.isUndefined(ad)){af=this[ae--]}else{af=ad}ag=af;for(;ae>=0;--ae){ag=ah(ag,this[ae],ae,this)}return ag})}if(!Array.prototype.indexOf){j.property(Array.prototype,"indexOf",function Q(ag,af){af=af||0;if(af<0){af+=this.length}var ae,ad=this.length;for(ae=af;ae<ad;++ae){if(ag===this[ae]){return ae}}return -1})}if(!Array.prototype.lastIndexOf){j.property(Array.prototype,"lastIndexOf",function ab(af,ae){ae=ae||-1;if(ae<0){ae+=this.length}var ad;for(ad=ae;ad>=0;--ad){if(af===this[ad]){return ad}}return -1})}if(!Function.prototype.bind){j.property(Function.prototype,"bind",function A(ah){ah=ah||{};var ai=Array.prototype.slice,ae=ai.call(arguments,1),ad=this,ag=function(){},af=function(){return ad.apply(this instanceof ag?this:ah,ae.concat(ai.call(arguments)))};ag.prototype=ad.prototype;af.prototype=new ag();return af})}j.property(Array.prototype,"merge",function R(){var ad=this,af,ae=arguments.length;for(af=0;af<ae;++af){if(Array.isArray(arguments[af])){ad=ad.merge.apply(this,arguments[af])}else{if(Array.prototype.indexOf.call(ad,arguments[af])<0){Array.prototype.push.call(ad,arguments[af])}}}return ad});j.property(Function,"isNative",function b(ae){var ad=/^\s*function\s*[^\(]*\(\s*[^\)]*\)\s*\{\s*\[\s*native code\s*\]\s*\}\s*$/;return ad.test(String(ae))});j.property(Array.prototype,"clone",function w(){return this.concat()});j.property(Date.prototype,"clone",function M(){return new Date(Number(this))});j.property(Function.prototype,"clone",function ac(){if(Function.isNative(this)){return this}var ae=/^\s*function\s*[^\(]*\((\s*[^\)])*\)\s*\{(.*)\}\s*$/,ad=ae.exec(String(this));return new Function(ad[1],ad[2])});j.property(RegExp.prototype,"clone",function m(){return new RegExp(this.source,(this.global?"g":"")+(this.ignoreCase?"i":"")+(this.multiline?"m":""))});j.property(Object,"clone",function i(ag,ae){var ad,af;ae=ae||false;if(Object.isUndefined(ag)){ad=null}else{if(Array.isArray(ag)){ad=Array.prototype.clone.call(ag)}else{if(Boolean.isBoolean(ag)){ad=!!ag}else{if(Date.isDate(ag)){ad=Date.prototype.clone.call(ag)}else{if(Function.isFunction(ag)){if(!ae){ad=ag}else{ad=Function.prototype.clone.call(ag)}}else{if(Number.isNumber(ag)){ad=Number(ag)}else{if(RegExp.isRegExp(ag)){ad=RegExp.prototype.clone.call(ag)}else{if(String.isString(ag)){ad=String(ag)}else{if(Object.isNode(ag)){ad=ag.cloneNode(true)}else{if(Object.isObject(ag)){if(!ag.____cloned){ag.____cloned=true;ad={};for(af in ag){if(typeof ag[af]!=="undefined"&&af!=="____cloned"){ad[af]=Object.clone(ag[af],ae)}}delete ag.____cloned}else{ad=null}}else{ad=ag}}}}}}}}}}return ad});j.property(String.prototype,"format",function W(){var ah=/%%|%(\d+\$)?([-+\'#0 ]*)(\*\d+\$|\*|\d+)?(\.(\*\d+\$|\*|\d+))?([scboxXuidfegEG])/g,ae=arguments,ag=0;var aj=function(ap,al,am,ao){am=am||" ";var an=(ap.length>=al)?"":Array(1+al-ap.length>>>0).join(am);return ao?ap+an:an+ap};var af=function(ao,an,ar,al,am,aq){var ap=al-ao.length;if(ap>0){if(ar||!am){ao=aj(ao,al,aq,ar)}else{ao=ao.slice(0,an.length)+aj("",ap,"0",true)+ao.slice(an.length)}}return ao};var ak=function(ar,aq,ap,at,am,al,ao){var an=ar>>>0;ap=ap&&an&&{"2":"0b","8":"0","16":"0x"}[aq]||"";ar=ap+aj(an.toString(aq),al||0,"0",false);return af(ar,ap,at,am,ao)};var ad=function(ao,aq,am,al,an,ap){if(al!=null){ao=ao.slice(0,al)}return af(ao,"",aq,am,an,ap)};var ai=function(aC,ao,ap,au,aE,az,an){if(aC=="%%"){return"%"}var al,ay,am,aD,aw,av=false,aq="",at=false,aB=false,aA=" ",ar=ap.length;for(var ax=0;ap&&ax<ar;ax++){switch(ap.charAt(ax)){case" ":aq=" ";break;case"+":aq="+";break;case"-":av=true;break;case"'":aA=ap.charAt(++ax);break;case"0":at=true;break;case"#":aB=true;break}}if(!au){au=0}else{if(au=="*"){au=+ae[ag++]}else{if(au.charAt(0)=="*"){au=+ae[au.slice(1,-1)]}else{au=+au}}}if(au<0){au=-au;av=true}if(!isFinite(au)){throw new Error("format: (minimum-)width must be finite")}if(!az){az="fFeE".indexOf(an)>-1?6:(an=="d")?0:undefined}else{if(az=="*"){az=+ae[ag++]}else{if(az.charAt(0)=="*"){az=+ae[az.slice(1,-1)]}else{az=+az}}}aw=ao?ae[parseInt(ao.slice(0,-1),10)-1]:ae[ag++];switch(an){case"s":return ad(String(aw),av,au,az,at,aA);case"c":return ad(String.fromCharCode(+aw),av,au,az,at);case"b":return ak(aw,2,aB,av,au,az,at);case"o":return ak(aw,8,aB,av,au,az,at);case"x":return ak(aw,16,aB,av,au,az,at);case"X":return ak(aw,16,aB,av,au,az,at).toUpperCase();case"u":return ak(aw,10,aB,av,au,az,at);case"i":case"d":al=(+aw)|0;ay=al<0?"-":aq;aw=ay+aj(String(Math.abs(al)),az,"0",false);return af(aw,ay,av,au,at);case"e":case"E":case"f":case"F":case"g":case"G":al=+aw;ay=al<0?"-":aq;am=["toExponential","toFixed","toPrecision"]["efg".indexOf(an.toLowerCase())];aD=["toString","toUpperCase"]["eEfFgG".indexOf(an)%2];aw=ay+Math.abs(al)[am](az);return af(aw,ay,av,au,at)[aD]();default:return aC}};return this.replace(ah,ai)});j.property(String.prototype,"toLowerCaseFirst",function T(){return this.replace(/^./,function(ad){return ad.toLowerCase()})});j.property(String.prototype,"toUpperCaseFirst",function o(){return this.replace(/^./,function(ad){return ad.toUpperCase()})});var z=String.prototype.replace;String.prototype.replace=function(ai,ah){if(Array.isArray(ai)){var ag=Array.isArray(ah)?function(aj){return ah[aj]}:function(){return ah},ad=String(this),af,ae=ai.length;for(af=0;af<ae;++af){ad=z.call(ad,ai[af],ag(af))}return ad}else{return z.call(this,ai,ah)}};if(typeof a.JSON!=="undefined"){E.toJSON=function(ad){return JSON.stringify(ad)}}else{E.toJSON=function(ah){var ae="";if(ah===document||ah===window){ae+="{}"}else{if(Object.isUndefined(ah)){ae+="null"}else{if(Array.isArray(ah)){ae+="[";var ag=true,ad,ak=ah.length;for(ad=0;ad<ak;ad++){if(ag){ag=false}else{ae+=","}ae+=E.toJSON(ah[ad])}ae+="]"}else{if(Number.isNumber(ah)){ae+=(isNaN(ah)||!isFinite(ah))?"null":ah}else{if(Boolean.isBoolean(ah)){ae+=ah?"true":"false"}else{if(String.isString(ah)){ae+='"'+Z(ah)+'"'}else{if(Function.isFunction(ah)&&ah.valueOf!==Object.prototype.valueOf){ae+=E.toJSON(ah.valueOf())}else{if(Object.isObject(ah)){E.toJSON._special=E.toJSON._special||("__jsonEncoded_"+String(Math.random()).replace(/^0?\./,""));if(!ah[E.toJSON._special]){var af=Object.prototype.hasOwnProperty;ah[E.toJSON._special]=true;ae+="{";var am=true,aj;for(aj in ah){if(typeof ah[aj]!=="undefined"&&aj!==E.toJSON._special&&(!af||af.call(ah,aj))){if(am){am=false}else{ae+=","}ae+='"'+Z(aj)+'":';ae+=E.toJSON(ah[aj])}}ae+="}";delete ah[E.toJSON._special]}else{ae+="null"}}else{ae+='"'+Z(String(ah))+'"'}}}}}}}}return ae}}var h=function(){this.log=function(){};var ae=this,ad=!!a.console,ag={},af={},ah=function(aj,ai){return function(){try{if(!ai.apply){var al,ak=arguments.length;for(al=0;al<ak;++al){ai(arguments[al])}}else{ai.apply(aj,arguments)}}catch(am){}}};if(ad&&!!a.console.log){this.log=ah(console,console.log)}else{if(!!a.opera&&!!opera.postError){this.log=ah(opera,opera.postError)}else{if(!!a.Debug&&!!a.Debug.write){this.log=ah(a.Debug,a.Debug.write)}else{if(!!a.dump){this.log=ah(a,function(){a.dump(String(arguments)+"\n")})}}}}this.info=ad&&!!console.info?ah(console,console.info):this.log;this.warn=ad&&!!console.warn?ah(console,console.warn):this.log;this.debug=ad&&!!console.debug?ah(console,console.debug):this.log;this.error=ad&&!!console.error?ah(console,console.error):this.log;this.exception=ad&&!!console.exception?ah(console,console.exception):this.error;this.assert=ad&&!!console.assert?ah(console,console.assert):function(ai,aj){if(!ai){ae.error(new Error(String(aj)||"Assertation failure"))}};this.timeStamp=ad&&!!console.timeStamp?ah(console,console.timeStamp):function(){ae.log((new Date()).toLocaleString())};this.group=ad&&!!console.group?ah(console,console.group):function(){var aj=["Group: "],ak,ai=arguments.length;for(ak=0;ak<ai;++ak){aj.push(arguments[ak])}this.log.apply(this,aj)};this.groupCollapsed=ad&&!!console.groupCollapsed?ah(console,console.groupCollapsed):ah(this,this.group);this.groupEnd=ad&&!!console.groupEnd?ah(console,console.groupEnd):function(){this.log("Group end.")};this.time=ad&&!!console.time?ah(console,console.time):function(ai){ai=ai||"anonymous";ag[ai]=Date.now();ae.log(ai+" timer started at ",(new Date(ag[ai])).toLocaleString())};this.timeEnd=ad&&!!console.timeEnd?ah(console,console.timeEnd):function(aj){aj=aj||"anonymous";if(typeof ag[aj]!=="undefined"){var ai=Date.now();ae.log(aj+" timer ended at ",(new Date(ai)).toLocaleString());ae.log(aj+" timer took up "+(ai-ag[aj])+" seconds");delete ag[aj]}else{ae.warn("There are no timers called "+aj)}};this.count=ad&&!!console.count?ah(console,console.count):function(ai){ai=ai||"anonymous";if(typeof af[ai]==="undefined"){af[ai]=0}af[ai]++;ae.log(ai+" counter ",af[ai])};this.dir=ad&&!!console.dir?ah(console,console.dir):function(ai){ae.log(E.toJSON(ai))};this.dirxml=ad&&!!console.dirxml?ah(console,console.dirxml):function(am){if(!am.nodeName||!am.attributes||!am.getAttribute){return false}var ai=String(am.nodeName).toLowerCase();if(!!am.id){ai+="#"+am.id}if(!!am.className){ai+="."+String(am.className).replace(/^\s+/,"").replace(/\s+/,".")}if(!am.nextSibling&&!am.previousSibling){ai+=":only-child"}else{if(!am.nextSibling){ai+=":last-child"}if(!am.previousSibling){ai+=":first-child"}}if(!!am.id&&(am.id===(location.hash||location.target).replace("#",""))){ai+=":target"}if(!am.innerHTML){ai+=":empty"}if(!!am.checked){ai+=":checked"}if(!!am.disabled){ai+=":disabled"}if(!!am.hasFocus&&am.hasFocus()){ai+=":focus"}if(!!am.getAttribute("lang")){ai+=":lang("+am.getAttribute("lang")+")"}var al="<"+String(am.nodeName).toLowerCase(),ak,aj=am.attributes.length;for(ak=0;ak<aj;++ak){al+=" "+am.attributes.item(ak).name+'="'+Z(am.attributes.item(ak).value)+'"'}al+=">";ae.log(ai+" : "+al);return true};this.clear=ad&&!!console.clear?ah(console,console.clear):function(){};this.trace=ad&&!!console.trace?ah(console,console.trace):function(){var ai;if(typeof arguments.caller!=="undefined"){ai=arguments.caller}else{if(typeof arguments.callee!=="undefined"){ai=arguments.callee.caller}}if(ai){ae.group("Trace route");while(ai&&!ai.____trace){ae.log(ai);ai.____trace=true;ai=ai.caller}if(ai&&ai.____trace){ae.warn("Trace route recursion")}ae.groupEnd();ai=arguments.caller||arguments.callee.caller;while(ai&&ai.____trace){delete ai.____trace;ai=ai.caller}}else{ae.info("Trace not implemented")}};this.profile=ad&&!!console.profile?ah(console,console.profile):function(){ae.info("Profile not implemented")};this.profileEnd=ad&&!!console.profileEnd?ah(console,console.profileEnd):function(){};this.table=ad&&!!console.table?ah(console,console.table):function(ak){if(Array.isArray(ak)){ae.group("Table");var aj,ai=ak.length;for(aj=0;aj<ai;++aj){ae.dir(ak[aj])}ae.groupEnd()}else{ae.warn("table must be an array")}}};a.Zork.prototype.console=E.console=new h();E.fn.console=function(){var ad=Array.prototype.slice.call(arguments,0);ad.push(this);E.console.log.apply(E.console,ad);return this};a.p=function(){var af,ae,ad=arguments.length;for(ae=0;ae<ad;++ae){af=typeof arguments[ae];if(af==="object"){j.console.dir(arguments[ae])}else{j.console.log(af,arguments[ae])}}};a.Zork.prototype.global=a.self;a.Zork.prototype.caller=a.top||a.parent||a.self;var r=0;a.Zork.prototype.generateId=function(){return"js-generated-"+(++r)};a.Zork.prototype.generateId.number=function(){return ++r};a.Zork.prototype.ready=function(ad){if(O){if(Function.isFunction(ad)){ad.call(a)}return true}else{if(Function.isFunction(ad)){E(ad)}return false}};a.Zork.Format=function(){};a.Zork.prototype.format=new a.Zork.Format();a.Zork.Format.prototype.date=function(ad){return this.datetime(ad,true)};a.Zork.Format.prototype.datetime=function(ae,ad){if(!Date.isDate(ae)){if(Number.isNumber(ae)){ae=ae*1000}ae=new Date(ae)}switch(true){case Function.isFunction(ae.toLocaleDateString)&&true===ad:return ae.toLocaleDateString();case Function.isFunction(ae.toLocaleFormat)&&String.isString(ad):return ae.toLocaleFormat(ad);case Function.isFunction(ae.toLocaleString):return ae.toLocaleString();default:return String(ae)}};a.Zork.Format.prototype.number=function(af,ad){var ae;ad=Number(ad||2);ae=Math.pow(10,ad);af=Math.round(Number(af)*ae)/ae;if(Function.isFunction(af.toLocaleString)){return af.toLocaleString()}return String(af)};a.Zork.Format.prototype.size=function(ae,ad){var af;ae=parseInt(ae,10);switch(true){case ae>1000000000:ae=ae/(1024*1024*1024);af=" GB";break;case ae>1000000:ae=ae/(1024*1024);af=" MB";break;case ae>1000:ae=ae/1024;af=" kB";break;default:af=" B";break}return j.format.number(ae,ad)+af};a.Zork.prototype.script=function(ae,ag){if(Array.isArray(ae)){var ad=this;ae.forEach(function(ah){ad.script(ah,ag)});return this}var af=String.isString(ae)?{url:ae}:ae;if(Function.isFunction(ag)){af.success=ag}else{if(Boolean.isBoolean(ag)){af.async=ag}else{if(Object.isObject(ag)){af=E.extend(af,ag)}}}if(typeof af.src!=="undefined"&&typeof af.url==="undefined"){af.url=af.src;delete af.src}if(typeof af.async==="undefined"){af.async=false}af.dataType="script";af.global=false;if(typeof af.cache==="undefined"){af.cache=true}E.ajax(af);j.console.log("script '"+af.url+"' loaded");return this};a.Zork.prototype.link=function(af,ad){var ae=this;j.ready(function(){if(Array.isArray(af)){af.forEach(function(ag){ae.link(ag,ad)});return}ad=ad||{};if(!!af.href){E.extend(ad,af)}else{ad.href=String(af)}ad.rel=ad.rel||"stylesheet";ad.href=encodeURI(ad.href);if(E('head link[rel="'+ad.rel+'"][href="'+ad.href+'"]').length===0){E("head").append(E("<link />").attr(ad))}j.console.log(ad.rel+" '"+ad.href+"' "+(ad.type?"("+ad.type+") ":"")+"linked")});return this};a.Zork.prototype.style=function(ad,ae){return this.link(ad,{rel:"stylesheet",type:ae||"text/css"})};var D={"$":"jQuery",js:"zork"},aa={jquery:E,"jquery/fn":E.fn,"jquery/ui":E.ui,zork:j,example:a.example={}},n=function(af,ad){af=af.clone();if(af.length===0){return ad}var ae=af.shift();if(typeof ad[ae]!=="undefined"){return n(af,ad[ae])}return null},g=function(ah,aj,af){if(!Array.isArray(ah)){ah=String(ah).replace(/^[\\\/\.,\s]+/,"").replace(/[\\\/\.,\s]+$/,"").split(/[\\\/\.,\s]+/)}if(typeof D[ah[0]]!=="undefined"){ah[0]=D[ah[0]]}var ag=ah.clone(),ae=ag.pop(),ad=ah.join("/").toLowerCase(),ai=function(al){if(typeof aa[ad]!=="undefined"){if(Function.isFunction(aj)){aj.call(af,aa[ad])}return aa[ad]}if(!Object.isUndefined(al,ae)){var ak=al[ae];aa[ad]=ak;if(Function.isFunction(aj)){aj.call(af,ak)}return ak}if(Function.isFunction(aj)){j.script("/scripts/"+ad+".js",function(){aj.call(af,aa[ad]=al[ae])});return null}else{j.script("/scripts/"+ad+".js",false);return aa[ad]=al[ae]}};if(ag.length>0){if(Function.isFunction(aj)){return g(ag,ai,af)}else{return ai(g(ag))}}else{return ai(a)}};a.Zork.prototype.require=function(ai,aj,ag){var ad,ah,af,ae;ag=ag||j;if(!Function.isFunction(aj)){aj=false}if(Array.isArray(ai)){ad=[];ae=ai.length;if(Function.isFunction(aj)){for(af=0;af<ae;++af){ah=ai[af];(function(ak,al){g(al,function(an){ad[ak]=an;for(var am=0;am<ae;++am){if(Object.isUndefined(ad[am])){return}}aj.apply(this,ad)},ag)})(af,ah)}return null}else{for(af=0;af<ae;++af){ad[af]=g(ai[af])}return ad}}else{return g(ai,aj,ag)}};a.Zork.Core=function(){this.version="1.0";this.modulePrefix=["zork","core"]};aa["zork/core"]=a.Zork.prototype.core=new a.Zork.Core();a.Zork.Core.prototype.defaultLocale="en";a.Zork.Core.prototype.userLocale="en";a.Zork.Core.prototype.uploadsUrl="/uploads";var J={};a.Zork.Core.prototype.translate=function(ah,aj){var af=this.translate.useCache,ae=ah.split("."),ag=ae[0],ad=aj||this.defaultLocale,ai=ad.substr(0,2);if(typeof this.translate._domainRpc=="undefined"){this.translate._domainRpc=j.core.rpc({method:"Grid\\Core\\Model\\Translate::textDomain"})}if(typeof this.translate._textRpc=="undefined"){this.translate._textRpc=j.core.rpc({method:"Grid\\Core\\Model\\Translate::translate"})}if(!J[ad]){J[ad]={}}if(!J[ad][ag]){if(af){J[ad][ag]=j.require("js.store").cache("translate-"+ad+"-"+ag)}if(!J[ad][ag]){J[ad][ag]=this.translate._domainRpc(ag,ad)}J[ad][ag]=J[ad][ag]||{}}if(J[ad][ag][ah]){return J[ad][ag][ah]}else{if(ad==="en"){j.console.warn("No language translation found for: ",ah," in language: ",ai);return this.translate._textRpc(ah,ad)}else{if(ad===ai){return this.translate(ah,"en")}else{return this.translate(ah,ai)}}}};a.Zork.Core.prototype.translate.useCache=true;a.Zork.Core.prototype.thumbnail=function(ad,ah){var ag=E.extend({},j.core.thumbnail.defaults),af=a.location.protocol+"//"+a.location.host,ae=function(ai){ai.width=parseInt(ai.width||0,10);ai.height=parseInt(ai.height||0,10);if(!ai.width&&!ai.height){ai.width=ag.width;ai.height=ag.height}ag=E.extend(ag,ai)};if(Object.isObject(ad)){ae(ad)}else{ag.url=String(ad);if(Object.isObject(ah)){ae(ah)}}if(!Array.isArray(ag.filters)){if(Object.isEmpty(ag.filters)){ag.filters=[]}else{ag.filters=[ag.filters]}}if(ag.url.indexOf(af)===0){ag.url="/"+ag.url.substr(af.length).replace(/^\//,"")}if(ag.url.indexOf("/uploads")!==0){ag.url=j.core.uploadsUrl+"/"+ag.url.replace(/^\//,"");if(ag.url.indexOf(af)===0){ag.url=ag.url.substr(af.length).replace(/^\//,"")}}if(ag.url.indexOf("/uploads")===0){ag.url=ag.url.substr("/uploads".length).replace(/^\//,"")}else{return false}if("bgColor" in ag){ag.bgcolor=ag.bgColor;delete ag.bgColor}if("bgcolor" in ag){ag.bgcolor=String(ag.bgcolor||"").replace(/^#/,"");if(""===ag.bgcolor){ag.bgcolor=j.core.thumbnail.defaults.bgcolor}}E.each(j.core.thumbnail.defaults,function(ai,aj){if(ai!=="width"&&ai!=="height"){ag[ai]=ag[ai]||aj}});return af+"/thumbnails/"+ag.url.replace(/\/[^\/]*\/?$/,"").replace(/^\//,"")+"/"+ag.method+"/"+ag.width+"x"+ag.height+"/"+ag.bgcolor+"/"+(ag.filters.length<1?"none":ag.filters.join("-"))+"/"+parseInt(ag.mtime||1,10)+"/"+ag.url.replace(/^.*\//g,"")};a.Zork.Core.prototype.thumbnail.defaults={method:"fit",bgcolor:"transparent",width:100,height:100,filters:[]};a.Zork.Core.prototype.rpc=function(ad){if(String.isString(ad)||!Object.isObject(ad)){ad={method:String(ad)}}if(Object.isUndefined(ad.format)){ad.format="json"}var ag=ad,ae=E.extend(function(){var ai=[],aj,ah=arguments.length;for(aj=0;aj<ah;++aj){ai.push(arguments[aj])}return ae.invoke(ai)},{response:null,result:null,invoke:function(){j.console.error("invoke is not implemented")}});if(Object.isUndefined(ag.context)){ag.context=ae}switch(ag.format){case"json":var af=function(ah){ae.response=ah;if(ae.response.error){j.console.debug(ae.response.error,ag);throw new Error("#"+ae.response.error.code+": "+ae.response.error.message)}else{ae.result=ae.response.result;if(!!ag.callback){ag.callback.call(ag.context,ae.result)}}};ae.invoke=function(ai){var ah=E.ajax({async:!!ag.callback,cache:false,contentType:"application/json",data:E.toJSON({jsonrpc:"2.0",method:String(ag.method),params:ai,id:j.generateId.number()}),dataType:"json",error:!ag.callback?null:function(al,aj,ak){j.console.error("Rpc call status: "+aj);j.console.debug(ag);j.console.log(al.responseText);j.console.log(ak)},success:!ag.callback?null:af,type:"POST",url:"/app/"+j.core.defaultLocale+"/rpc.json"});if(!ag.callback){if(typeof ah.responseText!=="undefined"){ah=E.parseJSON(ah.responseText)}af(ah);return ae.result}else{return null}};break;default:j.console.error("Unexpected format",ag)}ae.call=function(ak){ag.context=ak;var ai=[],aj,ah=arguments.length;for(aj=1;aj<ah;++aj){ai.push(arguments[aj])}return this.invoke(ai)};ae.apply=function(ak,al){ag.context=ak;if(Array.isArray(al)){var ai=[],aj,ah=al.length;for(aj=0;aj<ah;++aj){ai.push(al[aj])}return this.invoke(ai)}return this.invoke(al)};return ae};if(typeof E.fn.dataset==="undefined"){E.fn.dataset=function(ae,ah){if(Object.isUndefined(ae)||this.size()<=0){return typeof ah==="undefined"?null:this}if(typeof ae==="object"){for(var af in ae){this.dataset(af,ae[af])}return this}var ag=this.get(0);if(typeof ag.dataset!=="undefined"&&typeof ah==="undefined"&&String.isString(ae)){return ag.dataset[ae]}var ad="data-"+String(ae).replace(/[A-Z]/g,function(ai){return"-"+ai.toLowerCase()});return"undefined"===typeof ah?this.attr(ad):this.attr(ad,ah)}}if(typeof E.fn.fixedspinner==="undefined"){E.widget("ui.fixedspinner",E.ui.spinner,{options:{prefix:"",postfix:"",allowedPrefixes:[],allowedPostfixes:[]},_parse:function(ae){var ad;ae=String(ae);if((ad=ae.match(/^[^0-9\.]+/))&&ad.length&&~this.options.allowedPrefixes.indexOf(ad[0])){this._setOption("prefix",ad[0])}if((ad=ae.match(/[^0-9\.]+$/))&&ad.length&&~this.options.allowedPostfixes.indexOf(ad[0])){this._setOption("postfix",ad[0])}return +ae.replace(/[^0-9\.]+/,"").replace(/\.+$/,"").replace(/^\.+([0-9+]\.[0-9+])/,"$1")},_format:function(ad){return String(this.options.prefix)+String(ad)+String(this.options.postfix)},_setOption:function(ad,ae){if(ad==="allowedPrefixes"||ad==="allowedPostfixes"){if(Array.isArray(ae)){ae=String(ae).split(/[\s\|,]+/)}}if(ad==="prefix"||ad==="postfix"){ae=String(ae)}this._super(ad,ae)}})}E.widget("ui.inputset",{options:{items:":input, :button, :submit, :reset, :data(input), :data(button)"},_create:function(){this.element.addClass("ui-inputset")},_init:function(){this.refresh()},_setOption:function(ad,ae){if(ad==="disabled"){this.inputs.propAttr("option",ad,!!ae)}E.Widget.prototype._setOption.apply(this,arguments)},refresh:function(){var ad=this.element.css("direction")==="rtl";if(this.inputs&&this.inputs.length){this.inputs.removeClass("ui-inputset-element")}this.inputs=this.element.find(this.options.items).addClass("ui-inputset-element").removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":not(.ui-hidden)").filter(":first").addClass(ad?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(ad?"ui-corner-left":"ui-corner-right").end().filter(".ui-corner-left.ui-corner-right").removeClass("ui-corner-left ui-corner-right").addClass("ui-corner-all").end().end()},destroy:function(){this.element.removeClass("ui-inputset");this.inputs.removeClass("ui-inputset-element ui-corner-all ui-corner-left ui-corner-right");E.Widget.prototype.destroy.call(this)}});a.Zork.Core.prototype.distance=function(ah,ag){var af={top:0,left:0},ae=E(ah).offset()||af,ad=E(ag).offset()||af;return Math.sqrt(Math.pow(ae.top-ad.top,2)+Math.pow(ae.left-ad.left,2))};a.Zork.Core.prototype.layer=function(al,ag){if(Function.isFunction(al)){ag=al;al=false}var ae=100,an=100,aj=E('<div class="ui-overlay" />'),ai=E('<div class="ui-widget-overlay" />'),am=E('<div class="ui-widget-shadow" />'),af=function(aq,ao){var ap=String(aq.css("border-"+ao+"-width"));switch(ap.toLowerCase()){case"thin":return 1;break;case"medium":return 2;break;case"thick":return 3;break;default:return parseInt(ap,10)||0;break}},ad=function(){var au,aw,ao,aA,aB,ar,az,ay,aq,ap,ax,at=E(a).height()-10;am.stop(true,false);al.stop(true,false).css({height:"auto",padding:"0px"});if(al.is("iframe")){try{aB=al.contents()}catch(av){return}if(!aB.length||!aB[0].body){j.console.log("iframe not fully loaded yet, wait more 1000 ms");setTimeout(ad,1000);return}al.width(ae).height(an);try{ar=aB.outerWidth();az=aB.outerHeight()}catch(av){j.console.dir(av);if("stack" in av){j.console.log(av.stack)}try{ar=aB.width();az=aB.height()}catch(av){j.console.dir(av);if("stack" in av){j.console.log(av.stack)}ar=al.width();az=al.height()}}al.width(au=Math.max(ae,ar+20)).height(aw=Math.max(an,az)).css({"paddint-right":"25px","padding-bottom":"25px"});setTimeout(function(){al.css({"paddint-right":"0px","padding-bottom":"0px"})},1)}else{au=Math.max(ae,al.width());aw=Math.max(an,al.height())}if(aw>at){al.css("height",aw=at)}ap=af(am,"top");ax=af(am,"left");ao=(au/2)+ax;aA=(aw/2)+ap;ay=ap+(parseInt(am.css("paddingTop"),10)||0);aq=ax+(parseInt(am.css("paddingLeft"),10)||0);am.animate({width:parseInt(ao*2,10)+"px",height:parseInt(aA*2,10)+"px","margin-top":"-"+parseInt(aA+ay,10)+"px","margin-left":"-"+parseInt(ao+aq,10)+"px"},"fast");al.animate({"margin-top":"-"+parseInt(aA,10)+"px","margin-left":"-"+parseInt(ao,10)+"px"},"fast")},ah=function(){setTimeout(ad,100);setTimeout(ad,1600)};aj.css({position:"fixed",top:"0px",left:"0px",width:"100%",height:"100%","z-index":100});if("object"==typeof al&&("minWidth" in al||"minHeight" in al)){ae=Math.max(ae,al.minWidth||0);an=Math.max(an,al.minHeight||0);al=al.content||""}if(al){al=E(al)}else{if(100===ae&&100===an){ae=20;an=20}al=E("<div>").append('<img src="/images/scripts/loading.gif" />').width(ae).height(an).css({"line-height":an+"px","text-align":"center","vertical-align":"middle"})}aj.append(ai).append(am).append(al);am.css({position:"absolute",top:"50%",left:"50%"});al.css({position:"absolute",top:"50%",left:"50%"});E("body").append(aj.fadeIn());ad();if(al.is("iframe")){al.on("load",ah);try{al.contents().on("load","img, script, iframe",ah)}catch(ak){}}if(al.is(".ui-tabs")){al.on("tabsactivate tabsload",ah)}al.on("load","img, script, iframe",ah);al.on("tabsactivate tabsload",".ui-tabs",ah);return function(){if(Function.isFunction(ag)){ag.apply(this,arguments)}aj.fadeOut("fast",function(){aj.remove()})}};a.Zork.Core.prototype.ajaj=function(ad,af){var ae=typeof ad.url!=="undefined"?ad:{url:String(ad)};if(Function.isFunction(af)){ae.success=af}else{if(Boolean.isBoolean(af)){ae.async=af}else{if(Object.isObject(af)){ae=E.extend(ae,af)}}}ae.dataType="json";return E.ajax(ae)};a.Zork.Core.prototype.parseDocument=function(ad){ad=ad||"head, body";E(ad).find("[data-js-type]").each(function(){var ag=this,ae=E(this),af=String(ae.data("jsType")||"").split(/[\s,]+/);if(!ae.data("jsTypeParsed")){af.forEach(function(ah){if(ah){j.require(ah,function(aj){if(Function.isFunction(aj)&&aj.isElementConstructor){var ai=ah.split(".");ai.pop();ai=n(ai,a);aj.call(ai,ag)}else{j.console.error("Type is not a valid element constructor: "+ah)}})}});ae.data("jsTypeParsed",true)}});E(ad).find("form").each(function(){var ae=E(this);j.require("js.form.html5",function(){if(!ae.data("jsFormParsed")){j.form.html5(ae);ae.data("jsFormParsed",true)}})})};a.Zork.Core.prototype.loadElement=function(ai){if(ai.target!=="undefined"){var aj=E(ai.target),ad=!!ai.append,af=!!ai.prepend,ah=!!ai.replace,ag=j.core.layer(),ae=this;ai=E.extend({},ai);if(typeof ai.target!=="undefined"){delete ai.target}if(typeof ai.append!=="undefined"){delete ai.append}if(typeof ai.prepend!=="undefined"){delete ai.prepend}if(typeof ai.replcae!=="undefined"){delete ai.replcae}return this.ajaj(ai).done(function(ak){if(af){aj.prepend(ak.content)}else{if(ad){aj.append(ak.content)}else{if(ah){aj.replaceWith(ak.content)}else{aj.html(ak.content)}}}if(typeof ak.links!=="undefined"&&Array.isArray(ak.links)&&ak.links.length>0){j.link(ak.links)}if(typeof ak.styles!=="undefined"&&Array.isArray(ak.styles)&&ak.styles.length>0){j.style(ak.styles)}if(typeof ak.scripts!=="undefined"&&Array.isArray(ak.scripts)&&ak.scripts.length>0){j.script(ak.scripts)}if(typeof ak.modules!=="undefined"&&Array.isArray(ak.modules)&&ak.modules.length>0){j.require.call(j,ak.modules)}ae.parseDocument(aj)}).always(ag)}else{j.console.warn("Target required",ai);return null}};a.Zork.Core.prototype.loadRawElement=function(ah){if(ah.target!=="undefined"){var ai=E(ah.target),ad=!!ah.append,ae=!!ah.prepend,ag=!!ah.replace,aj=ah.success,af=j.core.layer(ah.complete);ah=E.extend({},ah);if(typeof ah.target!=="undefined"){delete ah.target}if(typeof ah.append!=="undefined"){delete ah.append}if(typeof ah.prepend!=="undefined"){delete ah.prepend}if(typeof ah.replace!=="undefined"){delete ah.replace}if(typeof ah.complete!=="undefined"){delete ah.complete}if(typeof ah.success!=="undefined"){delete ah.success}ah.dataType="text";return E.ajax(ah).done(function(ak){var al=ai.parent();if(ae){ai.prepend(ak)}else{if(ad){ai.append(ak)}else{if(ag){ai.replaceWith(ak)}else{ai.html(ak)}}}if(ag){j.core.parseDocument(al)}else{j.core.parseDocument(ai)}if(aj){aj.call(this,ak)}}).always(af)}else{j.console.warn("Target required",ah);return null}};a.Zork.Core.prototype.browser=function(ag,ae){var af=a.navigator.userAgent,ad=af.indexOf(ag);if(ad<0){return false}if(!Function.isFunction(ae)){ae=parseFloat}return ae(af.substr(ad+ag.length))};a.Zork.Core.prototype.browser.opera=((a.navigator.appName==="Opera")||(a.navigator.userAgent.indexOf("Opera/")>=0)||(typeof a.opera!=="undefined"&&typeof a.opera.constructor==="function"&&Function.isNative(a.opera.constructor)))?(a.Zork.Core.prototype.browser("Version/")||a.Zork.Core.prototype.browser("Opera/")||parseFloat(a.opera.version())):false;a.Zork.Core.prototype.browser.operaMini=((a.navigator.userAgent.indexOf("Opera Mini/")>=0)||(typeof a.operamini!=="undefined"&&typeof a.operamini.constructor==="function"&&Function.isNative(a.operamini.constructor)))?(a.Zork.Core.prototype.browser("Opera Mini/")||a.Zork.Core.prototype.browser("Opera/")||parseFloat(a.opera.version())):false;a.Zork.Core.prototype.browser.firefox=a.Zork.Core.prototype.browser("Firefox/");a.Zork.Core.prototype.browser.gecko=(a.navigator.userAgent.indexOf("Gecko/")>=0)?(a.Zork.Core.prototype.browser("rv:")):false;a.Zork.Core.prototype.browser.chrome=a.Zork.Core.prototype.browser("Chrome/");a.Zork.Core.prototype.browser.safari=(a.navigator.userAgent.indexOf("Safari/")>=0)?(a.Zork.Core.prototype.browser("Version/")):false;a.Zork.Core.prototype.browser.webkit=a.Zork.Core.prototype.browser("WebKit/");a.Zork.Core.prototype.browser.msie=(!a.Zork.Core.prototype.browser.opera)?(a.Zork.Core.prototype.browser("MSIE ")):false;var K=function(){var ae,ad=E("html"),ai="js-browser-",af=a.document.createElement("div"),ah=j.core.browser.msie;for(ae in j.core.browser){if(typeof j.core.browser[ae]!=="undefined"&&ae!=="prototype"&&typeof Function.prototype[ae]==="undefined"&&j.core.browser[ae]){ad.addClass(ai+ae).addClass(ai+ae+"-"+parseInt(j.core.browser[ae],10)).addClass(ai+ae+"-"+String(j.core.browser[ae]).replace(/\./g,"-"))}}if(!E.support.ajax){ad.addClass(ai+"no-ajax")}if(!E.support.boxModel){ad.addClass(ai+"quirks-boxes")}if(!E.support.opacity){ad.addClass(ai+"no-opacity")}try{af.style.color="rgba(0,0,0,0.5)"}catch(ag){ad.addClass(ai+"no-rgba")}if(ah&&(ah>=5.5)&&(ah<10)){ad.addClass(ai+"gradient-filter")}};E(function(){O=true;j.core.defaultLocale=E("meta[name='zork:locale']").attr("content")||"en";j.core.userLocale=E("meta[name='zork:userlocale']").attr("content")||j.core.defaultLocale;j.core.uploadsUrl=E("meta[name='zork:uploads']").attr("content");K();j.core.parseDocument()});a.Zork.Ui=function(){this.version="1.0";this.modulePrefix=["zork","ui"]};aa["zork/ui"]=a.Zork.prototype.ui=new a.Zork.Ui();var B=function(ae,af,ag){af=af||"&";ag=ag||"=";var ad={};String(ae).split(af).forEach(function(ai){var ah=ai.indexOf(ag),aj=null,ak=null;if(ah===0){return}if(ah<0){aj=ai;ak=true}else{aj=ai.substr(0,ah);ak=ai.substr(ah+1)}ad[aj]=ak});return ad};(function(){var af=1100000,ag="Grid\\User\\Model\\User\\Rpc::status",ae=j.core.rpc({method:ag,callback:function(ah){j.console.log(ag,ah);if(ah.loggedIn){ad()}}}),ad=function(){setTimeout(ae,af)};ad()}())}(window,jQuery));